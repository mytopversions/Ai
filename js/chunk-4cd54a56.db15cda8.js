(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cd54a56"],{"05a6":function(t,a,i){"use strict";i("e906")},"86bd":function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"operation-page"},[i("div",{staticClass:"container pb-tabs"},[i("div",{staticClass:"header-actions"},[i("h2",[t._v("钱包操作")]),i("div",{staticClass:"sort-options"},[i("div",{staticClass:"sort-option",class:{active:"default"===t.sortType},on:{click:function(a){return t.setSortType("default")}}},[t._v(" 默认 ")]),i("div",{staticClass:"sort-option",class:{active:"time"===t.sortType},on:{click:function(a){return t.setSortType("time")}}},[t._v(" 时间 ")])])]),t.loading?i("div",{staticClass:"loading-spinner"},[t._v(" 加载中... ")]):0===t.sortedWallets.length?i("div",{staticClass:"empty-state"},[i("p",[t._v("暂无钱包，请前往「钱包」页面创建或导入钱包")])]):i("div",{staticClass:"wallet-list"},t._l(t.sortedWallets,(function(a){return i("div",{key:a.address,staticClass:"card wallet-card"},[i("div",{staticClass:"wallet-header"},[i("div",{staticClass:"wallet-address"},[a.remark?i("span",{staticClass:"wallet-remark"},[t._v("【"+t._s(a.remark)+"】")]):t._e(),a.isWatchOnly?i("span",{staticClass:"watch-only-tag"},[t._v("【观察】")]):t._e(),t._v(" "+t._s(t.formatAddress(a.address))+" ")]),i("div",{staticClass:"wallet-balance"},[t._v(t._s(t.formatBalance(a.balance))+" TRX")])]),i("div",{staticClass:"wallet-info"},[i("div",{staticClass:"info-item"},[i("div",{staticClass:"info-label"},[t._v("当前质押")]),i("div",{staticClass:"info-value"},[t._v(t._s(a.pledgeInfo?t.formatBalance(a.pledgeInfo.amount)+" TRX":"未质押"))])]),i("div",{staticClass:"info-item"},[i("div",{staticClass:"info-label"},[t._v("当前参与")]),i("div",{staticClass:"info-value"},[t._v(t._s(a.participateInfo?t.formatBalance(a.participateInfo.amount)+" TRX":"未参与"))])]),i("div",{staticClass:"info-item"},[i("div",{staticClass:"info-label"},[t._v("剩余额度")]),i("div",{staticClass:"info-value"},[t._v(t._s(a.remainingLimit?a.remainingLimit:0))])]),i("div",{staticClass:"info-item"},[i("div",{staticClass:"info-label"},[t._v(t._s(a.participateInfo?"预计出局":"最后参与"))]),i("div",{staticClass:"info-value"},[t._v(t._s(a.participateInfo?t.formatTime(t.getExitTime(a)):t.getLastParticipateTime(a)?t.formatTime(t.getLastParticipateTime(a)):"-"))])]),a.participateInfo&&!a.participateInfo.matched?i("div",{staticClass:"info-item"},[i("div",{staticClass:"info-label"},[t._v("参与状态")]),i("div",{staticClass:"info-value"},[t._v("未出局")])]):t._e(),t.getLatestWithdraw(a)?i("div",{staticClass:"info-item"},[i("div",{staticClass:"info-label"},[t._v("最近收益")]),i("div",{staticClass:"info-value"},[t._v(t._s(t.formatBalance(t.getLatestWithdraw(a).profit))+" TRX")])]):t._e()]),i("div",{staticClass:"wallet-actions"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:a.isWatchOnly||t.pledgeLoading===a.address||a.balance<t.config.BALANCE_THRESHOLDS.MIN_PLEDGE},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.handlePledge(a)}}},[t._v(" 质押 "),t.pledgeLoading===a.address?i("span",[t._v("(处理中...)")]):t._e(),a.isWatchOnly?i("span",[t._v("(观察钱包)")]):t._e()]),i("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:a.isWatchOnly||t.participateLoading===a.address||a.balance<t.config.BALANCE_THRESHOLDS.MIN_PARTICIPATE||!a.pledgeInfo},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.handleParticipate(a)}}},[t._v(" 参与 "),t.participateLoading===a.address?i("span",[t._v("(处理中...)")]):t._e(),a.isWatchOnly?i("span",[t._v("(观察钱包)")]):t._e()]),i("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:a.isWatchOnly||t.withdrawLoading===a.address||a.balance<t.config.BALANCE_THRESHOLDS.MIN_WITHDRAW||!a.participateInfo},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.handleWithdraw(a)}}},[t._v(" 提现 "),t.withdrawLoading===a.address?i("span",[t._v("(处理中...)")]):t._e(),a.isWatchOnly?i("span",[t._v("(观察钱包)")]):t._e()])])])})),0)])])},s=[],n=i("2f62"),l=i("f121"),r={name:"Operation",data(){return{loading:!0,pledgeLoading:null,participateLoading:null,withdrawLoading:null,config:{TRANSACTION_AMOUNTS:l["e"],BALANCE_THRESHOLDS:l["b"],TIME_CONFIG:l["d"]}}},computed:{...Object(n["e"])(["sortType","isUnlocked"]),...Object(n["c"])(["sortedWalletsForOperation"]),sortedWallets(){return this.sortedWalletsForOperation}},created(){this.isUnlocked?this.fetchData():this.$router.push("/login")},methods:{...Object(n["d"])(["SET_SORT_TYPE"]),...Object(n["b"])(["updateAllWallets","pledge","participate","withdraw"]),async fetchData(){this.loading=!0,await this.updateAllWallets(),this.loading=!1},setSortType(t){this.SET_SORT_TYPE(t)},async handlePledge(t){if(!this.pledgeLoading)if(t.balance<this.config.BALANCE_THRESHOLDS.MIN_PLEDGE)alert("余额不足，无法质押，需要至少 "+this.config.BALANCE_THRESHOLDS.MIN_PLEDGE+" TRX");else{this.pledgeLoading=t.address;try{const a=await this.pledge({address:t.address});a.success?(alert("质押交易发送成功，交易ID: "+a.txId),setTimeout(()=>{this.fetchData()},this.config.TIME_CONFIG.REFRESH_DELAY)):alert("质押失败: "+a.message)}catch(a){alert("质押操作出错: "+a.message)}finally{this.pledgeLoading=null}}},async handleParticipate(t){if(!this.participateLoading)if(t.balance<this.config.BALANCE_THRESHOLDS.MIN_PARTICIPATE)alert("余额不足，无法参与，需要至少 "+this.config.BALANCE_THRESHOLDS.MIN_PARTICIPATE+" TRX");else if(t.pledgeInfo){this.participateLoading=t.address;try{const a=await this.participate({address:t.address});a.success?(alert("参与交易发送成功，交易ID: "+a.txId),setTimeout(()=>{this.fetchData()},this.config.TIME_CONFIG.REFRESH_DELAY)):alert("参与失败: "+a.message)}catch(a){alert("参与操作出错: "+a.message)}finally{this.participateLoading=null}}else alert("您需要先质押才能参与")},async handleWithdraw(t){if(!this.withdrawLoading)if(t.balance<this.config.BALANCE_THRESHOLDS.MIN_WITHDRAW)alert("余额不足，无法提现，需要至少 "+this.config.BALANCE_THRESHOLDS.MIN_WITHDRAW+" TRX");else if(t.participateInfo){this.withdrawLoading=t.address;try{const a=await this.withdraw({address:t.address});a.success?(alert("提现交易发送成功，交易ID: "+a.txId),setTimeout(()=>{this.fetchData()},this.config.TIME_CONFIG.REFRESH_DELAY)):alert("提现失败: "+a.message)}catch(a){alert("提现操作出错: "+a.message)}finally{this.withdrawLoading=null}}else alert("您需要先参与才能提现")},formatAddress(t){return t?t.substring(0,8)+"..."+t.substring(t.length-8):""},formatBalance(t){return void 0===t||null===t?"0":parseFloat(t).toFixed(2)},getExitTime(t){return t.participateInfo?t.participateInfo.time+this.config.TIME_CONFIG.PARTICIPATE_CYCLE:null},getLastParticipateTime(t){if(t.withdrawInfo&&t.withdrawInfo.length>0){const a=t.withdrawInfo[t.withdrawInfo.length-1];return a.time}return null},formatTime(t){if(!t)return"-";const a=new Date(t);return a.toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},getLatestWithdraw(t){return t.withdrawInfo&&t.withdrawInfo.length>0?t.withdrawInfo[t.withdrawInfo.length-1]:null}}},d=r,o=(i("05a6"),i("2877")),c=Object(o["a"])(d,e,s,!1,null,"2d5c4638",null);a["default"]=c.exports},e906:function(t,a,i){}}]);