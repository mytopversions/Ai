(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f53d80d"],{"73d0":function(s,t,r){},a55b3:function(s,t,r){"use strict";r.r(t);var e=function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"login-page"},[r("div",{staticClass:"card login-card"},[r("h2",{staticClass:"text-center mb-2"},[s._v("钱包解锁")]),s.isFirstTime?r("div",[r("p",{staticClass:"text-center mb-1"},[s._v("首次使用，请设置访问密码")]),r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入访问密码"},domProps:{value:s.password},on:{input:function(t){t.target.composing||(s.password=t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.confirmPassword,expression:"confirmPassword"}],attrs:{type:"password",placeholder:"请确认访问密码"},domProps:{value:s.confirmPassword},on:{input:function(t){t.target.composing||(s.confirmPassword=t.target.value)}}})]),s.error?r("p",{staticClass:"error-text"},[s._v(s._s(s.error))]):s._e(),r("button",{staticClass:"btn btn-primary w-100",on:{click:s.setupPassword}},[s._v("设置密码")])]):r("div",[r("p",{staticClass:"text-center mb-1"},[s._v("请输入访问密码解锁钱包")]),r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入访问密码"},domProps:{value:s.password},on:{input:function(t){t.target.composing||(s.password=t.target.value)}}})]),s.error?r("p",{staticClass:"error-text"},[s._v(s._s(s.error))]):s._e(),r("button",{staticClass:"btn btn-primary w-100",on:{click:s.unlock}},[s._v("解锁钱包")])])])])},o=[],a=r("2f62"),i={name:"Login",data(){return{password:"",confirmPassword:"",error:"",isFirstTime:!1}},created(){this.isFirstTime=!localStorage.getItem("encryptedData"),console.log("是否首次使用:",this.isFirstTime)},methods:{...Object(a["b"])(["setPassword","unlockWallets"]),...Object(a["d"])(["SET_UNLOCKED"]),setupPassword(){if(this.password)if(this.password===this.confirmPassword)try{this.setPassword(this.password),console.log("密码设置成功"),this.SET_UNLOCKED(!0);const s=this.$route.path;"/wallet"!==s&&this.$router.push("/wallet").catch(s=>{"NavigationDuplicated"!==s.name&&console.error("导航到钱包页面出错:",s)})}catch(s){console.error("设置密码失败:",s),this.error="设置密码失败: "+s.message}else this.error="两次输入的密码不一致";else this.error="请输入密码"},async unlock(){if(this.password)try{console.log("尝试解锁钱包...");const s=await this.unlockWallets({password:this.password});if(s){console.log("解锁成功, 设置解锁状态"),this.SET_UNLOCKED(!0);const s=this.$route.path;"/operation"!==s&&this.$router.push("/operation").catch(s=>{"NavigationDuplicated"!==s.name&&console.error("导航到操作页面出错:",s)})}else this.error="密码错误，请重试"}catch(s){console.error("解锁失败:",s),this.error="解锁失败: "+s.message}else this.error="请输入密码"}}},n=i,c=(r("aeaa"),r("2877")),l=Object(c["a"])(n,e,o,!1,null,"a08c799e",null);t["default"]=l.exports},aeaa:function(s,t,r){"use strict";r("73d0")}}]);