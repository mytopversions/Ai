(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18364282"],{"4dd7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wallet-page"},[a("div",{staticClass:"container pb-tabs"},[a("div",{staticClass:"header-actions"},[a("h2",[t._v("钱包管理")]),a("div",{staticClass:"wallet-actions"},[a("button",{staticClass:"btn btn-primary",on:{click:t.openCreateDialog}},[t._v("创建")]),a("button",{staticClass:"btn btn-secondary ml-1",on:{click:function(e){t.showImportDialog=!0}}},[t._v("导入")]),a("button",{staticClass:"btn btn-secondary ml-1",on:{click:function(e){t.showWatchWalletDialog=!0}}},[t._v("添加观察钱包")])])]),t.wallets.length>0?a("div",{staticClass:"total-balance-card mb-3"},[a("div",{staticClass:"total-balance-content"},[a("div",{staticClass:"total-balance-label"},[t._v("总资产 (TRX)")]),a("div",{staticClass:"total-balance-value"},[t._v(t._s(t.totalBalance))]),a("div",{staticClass:"total-balance-count"},[t._v("共 "+t._s(t.wallets.length)+" 个钱包")])])]):t._e(),t.loading?a("div",{staticClass:"loading-spinner"},[t._v(" 加载中... ")]):0===t.wallets.length?a("div",{staticClass:"empty-state"},[a("p",[t._v("暂无钱包，请创建或导入钱包")])]):a("div",{staticClass:"wallet-list"},t._l(t.wallets,(function(e){return a("div",{key:e.address,staticClass:"card wallet-card"},[a("div",{staticClass:"wallet-header"},[a("div",{staticClass:"wallet-address"},[e.remark?a("span",{staticClass:"wallet-remark"},[t._v("【"+t._s(e.remark)+"】")]):t._e(),e.isWatchOnly?a("span",{staticClass:"watch-only-tag"},[t._v("【观察】")]):t._e(),t._v(" "+t._s(t.formatAddress(e.address))+" "),t.walletRefreshing[e.address]?a("span",{staticClass:"refresh-indicator"},[a("span",{staticClass:"refresh-text"},[t._v("(刷新中...)")])]):t._e()]),a("div",{staticClass:"wallet-actions-top"},[a("div",{staticClass:"wallet-balance"},[t._v(t._s(t.formatBalance(e.balance))+" TRX")]),a("button",{staticClass:"btn-icon delete-btn",attrs:{title:"删除钱包"},on:{click:function(a){return t.openDeleteWalletDialog(e)}}},[a("i",{staticClass:"icon-delete"},[t._v("×")])])])]),a("div",{staticClass:"wallet-info"},[a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("绑定转出地址")]),a("div",{staticClass:"info-value"},[t._v(t._s(e.isWatchOnly?"-":t.formatAddress(e.bindAddress)))])]),a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("备注")]),a("div",{staticClass:"info-value"},[a("div",{staticClass:"edit-remark"},[a("span",[t._v(t._s(e.remark||"-"))]),a("button",{staticClass:"btn-icon",on:{click:function(a){return t.openEditRemarkDialog(e)}}},[a("i",{staticClass:"icon-edit"},[t._v("✎")])])])])])]),e.isWatchOnly?t._e():a("div",{staticClass:"wallet-actions"},[a("button",{staticClass:"btn btn-primary mr-1",attrs:{type:"button",disabled:t.transferLoading===e.address||e.balance<=0},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.openTransferDialog(e)}}},[t._v(" 转出 "),t.transferLoading===e.address?a("span",[t._v("(处理中...)")]):t._e()]),a("button",{staticClass:"btn btn-secondary mr-1",on:{click:function(a){return t.openExportPrivateKeyDialog(e)}}},[t._v(" 导出私钥 ")]),a("button",{staticClass:"btn btn-secondary",on:{click:function(a){return t.openEditBindAddressDialog(e)}}},[t._v(" 修改绑定地址 ")])])])})),0)]),t.showCreateDialog?a("div",{staticClass:"dialog-overlay",on:{click:t.hideDialogs}},[a("div",{staticClass:"dialog-content",on:{click:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"dialog-title"},[t._v("创建钱包")]),a("div",{staticClass:"form-group"},[a("label",[t._v("私钥（自动生成）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newWallet.privateKey,expression:"newWallet.privateKey"}],attrs:{type:"text",readonly:""},domProps:{value:t.newWallet.privateKey},on:{input:function(e){e.target.composing||t.$set(t.newWallet,"privateKey",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("地址（自动生成）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newWallet.address,expression:"newWallet.address"}],attrs:{type:"text",readonly:""},domProps:{value:t.newWallet.address},on:{input:function(e){e.target.composing||t.$set(t.newWallet,"address",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("绑定转出地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newWallet.bindAddress,expression:"newWallet.bindAddress"}],attrs:{type:"text",placeholder:"请输入转出地址"},domProps:{value:t.newWallet.bindAddress},on:{input:function(e){e.target.composing||t.$set(t.newWallet,"bindAddress",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("备注（选填）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newWallet.remark,expression:"newWallet.remark"}],attrs:{type:"text",placeholder:"请输入钱包备注"},domProps:{value:t.newWallet.remark},on:{input:function(e){e.target.composing||t.$set(t.newWallet,"remark",e.target.value)}}})]),a("div",{staticClass:"dialog-actions"},[a("button",{staticClass:"btn btn-secondary",on:{click:t.hideDialogs}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.createLoading},on:{click:t.handleCreateWallet}},[t._v("确认")])])])]):t._e(),t.showImportDialog?a("div",{staticClass:"dialog-overlay",on:{click:t.hideDialogs}},[a("div",{staticClass:"dialog-content",on:{click:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"dialog-title"},[t._v("导入钱包")]),a("div",{staticClass:"form-group"},[a("label",[t._v("私钥")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.importedWallet.privateKey,expression:"importedWallet.privateKey"}],attrs:{type:"text",placeholder:"请输入私钥"},domProps:{value:t.importedWallet.privateKey},on:{input:function(e){e.target.composing||t.$set(t.importedWallet,"privateKey",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("地址（自动识别）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.importedWallet.address,expression:"importedWallet.address"}],attrs:{type:"text",readonly:""},domProps:{value:t.importedWallet.address},on:{input:function(e){e.target.composing||t.$set(t.importedWallet,"address",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("绑定转出地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.importedWallet.bindAddress,expression:"importedWallet.bindAddress"}],attrs:{type:"text",placeholder:"请输入转出地址"},domProps:{value:t.importedWallet.bindAddress},on:{input:function(e){e.target.composing||t.$set(t.importedWallet,"bindAddress",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("备注（选填）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.importedWallet.remark,expression:"importedWallet.remark"}],attrs:{type:"text",placeholder:"请输入钱包备注"},domProps:{value:t.importedWallet.remark},on:{input:function(e){e.target.composing||t.$set(t.importedWallet,"remark",e.target.value)}}})]),a("div",{staticClass:"dialog-actions"},[a("button",{staticClass:"btn btn-secondary",on:{click:t.hideDialogs}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.importLoading},on:{click:t.handleImportWallet}},[t._v("确认")])])])]):t._e(),t.showTransferDialogFlag?a("div",{staticClass:"dialog-overlay",on:{click:t.hideDialogs}},[a("div",{staticClass:"dialog-content",on:{click:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"dialog-title"},[t._v("转出")]),a("div",{staticClass:"form-group"},[a("label",[t._v("当前余额")]),a("input",{attrs:{type:"text",readonly:""},domProps:{value:t.currentWallet?t.formatBalance(t.currentWallet.balance)+" TRX":"0 TRX"}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("转出地址")]),a("div",{staticClass:"transfer-address-selection"},[a("div",{staticClass:"radio-group"},[a("label",{staticClass:"radio-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.useBindAddress,expression:"useBindAddress"}],attrs:{type:"radio",name:"transferAddressType"},domProps:{value:!0,checked:t._q(t.useBindAddress,!0)},on:{change:function(e){t.useBindAddress=!0}}}),t._v(" 使用绑定地址 ")]),a("label",{staticClass:"radio-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.useBindAddress,expression:"useBindAddress"}],attrs:{type:"radio",name:"transferAddressType"},domProps:{value:!1,checked:t._q(t.useBindAddress,!1)},on:{change:function(e){t.useBindAddress=!1}}}),t._v(" 手动输入地址 ")])]),t.useBindAddress?a("input",{attrs:{type:"text",readonly:""},domProps:{value:t.currentWallet?t.currentWallet.bindAddress:""}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.customTransferAddress,expression:"customTransferAddress"}],attrs:{type:"text",placeholder:"请输入转出地址"},domProps:{value:t.customTransferAddress},on:{input:function(e){e.target.composing||(t.customTransferAddress=e.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("label",[t._v("转出金额")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.transferAmount,expression:"transferAmount"}],attrs:{type:"number",placeholder:"请输入转出金额"},domProps:{value:t.transferAmount},on:{input:function(e){e.target.composing||(t.transferAmount=e.target.value)}}})]),a("div",{staticClass:"dialog-actions"},[a("button",{staticClass:"btn btn-secondary",on:{click:t.hideDialogs}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.transferLoading||!t.transferAmount||parseFloat(t.transferAmount)<=0||parseFloat(t.transferAmount)>(t.currentWallet?t.currentWallet.balance:0)||!t.useBindAddress&&!t.customTransferAddress},on:{click:t.transferOut}},[t._v(" 确认 ")])])])]):t._e(),t.showExportPrivateKeyDialog?a("div",{staticClass:"dialog-overlay",on:{click:t.hideDialogs}},[a("div",{staticClass:"dialog-content",on:{click:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"dialog-title"},[t._v("导出私钥")]),a("div",{staticClass:"form-group"},[a("label",[t._v("钱包地址")]),a("input",{attrs:{type:"text",readonly:""},domProps:{value:t.currentWallet?t.formatAddress(t.currentWallet.address):""}})]),t.privateKeyVisible?a("div",{staticClass:"form-group"},[a("label",[t._v("私钥（请妥善保管）")]),a("div",{staticClass:"private-key-container"},[a("input",{attrs:{type:"text",readonly:""},domProps:{value:t.currentWallet?t.currentWallet.privateKey:""}}),a("button",{staticClass:"btn-icon copy-btn",on:{click:t.copyPrivateKey}},[a("i",{staticClass:"icon-copy"},[t._v("复制")])])]),t.copySuccess?a("p",{staticClass:"success-message"},[t._v("已复制到剪贴板")]):t._e()]):t._e(),a("div",{staticClass:"dialog-actions"},[a("button",{staticClass:"btn btn-secondary",on:{click:t.hideDialogs}},[t._v("取消")]),t.privateKeyVisible?t._e():a("button",{staticClass:"btn btn-primary",on:{click:t.showPrivateKey}},[t._v(" 显示私钥 ")])])])]):t._e(),t.showEditRemarkDialog?a("div",{staticClass:"dialog-overlay",on:{click:t.hideDialogs}},[a("div",{staticClass:"dialog-content",on:{click:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"dialog-title"},[t._v("修改备注")]),a("div",{staticClass:"form-group"},[a("label",[t._v("钱包地址")]),a("input",{attrs:{type:"text",readonly:""},domProps:{value:t.currentWallet?t.formatAddress(t.currentWallet.address):""}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("备注")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.remarkText,expression:"remarkText"}],attrs:{type:"text",placeholder:"请输入备注"},domProps:{value:t.remarkText},on:{input:function(e){e.target.composing||(t.remarkText=e.target.value)}}})]),a("div",{staticClass:"dialog-actions"},[a("button",{staticClass:"btn btn-secondary",on:{click:t.hideDialogs}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.remarkLoading},on:{click:t.updateRemark}},[t._v(" 确认 ")])])])]):t._e(),t.showWatchWalletDialog?a("div",{staticClass:"dialog-overlay",on:{click:t.hideDialogs}},[a("div",{staticClass:"dialog-content",on:{click:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"dialog-title"},[t._v("添加观察钱包")]),a("div",{staticClass:"form-group"},[a("label",[t._v("钱包地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.watchWallet.address,expression:"watchWallet.address"}],attrs:{type:"text",placeholder:"请输入钱包地址"},domProps:{value:t.watchWallet.address},on:{input:function(e){e.target.composing||t.$set(t.watchWallet,"address",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("备注（选填）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.watchWallet.remark,expression:"watchWallet.remark"}],attrs:{type:"text",placeholder:"请输入钱包备注"},domProps:{value:t.watchWallet.remark},on:{input:function(e){e.target.composing||t.$set(t.watchWallet,"remark",e.target.value)}}})]),a("div",{staticClass:"dialog-actions"},[a("button",{staticClass:"btn btn-secondary",on:{click:t.hideDialogs}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.watchWalletLoading},on:{click:t.handleImportWatchWallet}},[t._v(" 确认 ")])])])]):t._e(),t.showEditBindAddressDialog?a("div",{staticClass:"dialog-overlay",on:{click:t.hideDialogs}},[a("div",{staticClass:"dialog-content",on:{click:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"dialog-title"},[t._v("修改绑定转出地址")]),a("div",{staticClass:"form-group"},[a("label",[t._v("钱包地址")]),a("input",{attrs:{type:"text",readonly:""},domProps:{value:t.currentWallet?t.formatAddress(t.currentWallet.address):""}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("当前绑定地址")]),a("input",{attrs:{type:"text",readonly:""},domProps:{value:t.currentWallet?t.formatAddress(t.currentWallet.bindAddress):""}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("新绑定地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newBindAddress,expression:"newBindAddress"}],attrs:{type:"text",placeholder:"请输入新的绑定转出地址"},domProps:{value:t.newBindAddress},on:{input:function(e){e.target.composing||(t.newBindAddress=e.target.value)}}})]),a("div",{staticClass:"dialog-actions"},[a("button",{staticClass:"btn btn-secondary",on:{click:t.hideDialogs}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.newBindAddress||t.bindAddressLoading},on:{click:t.updateBindAddress}},[t._v(" 确认 ")])])])]):t._e(),t.showDeleteWalletDialog?a("div",{staticClass:"dialog-overlay",on:{click:t.hideDialogs}},[a("div",{staticClass:"dialog-content",on:{click:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"dialog-title"},[t._v("删除钱包")]),a("div",{staticClass:"form-group"},[a("label",[t._v("钱包地址")]),a("input",{attrs:{type:"text",readonly:""},domProps:{value:t.currentWallet?t.formatAddress(t.currentWallet.address):""}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("当前余额")]),a("input",{attrs:{type:"text",readonly:""},domProps:{value:t.currentWallet?t.formatBalance(t.currentWallet.balance)+" TRX":"0 TRX"}})]),a("div",{staticClass:"warning-message"},[a("p",[t._v("警告：删除钱包后将无法恢复，请确保已备份私钥！")]),t.currentWallet&&t.currentWallet.balance>0?a("p",{staticClass:"has-balance-warning"},[t._v(" 该钱包当前有余额，删除前请转出资金！ ")]):t._e()]),a("div",{staticClass:"dialog-actions"},[a("button",{staticClass:"btn btn-secondary",on:{click:t.hideDialogs}},[t._v("取消")]),a("button",{staticClass:"btn btn-danger",attrs:{disabled:t.deleteLoading},on:{click:t.confirmDeleteWallet}},[t._v(" 确认删除 ")])])])]):t._e()])},l=[],i=a("2f62"),r=a("d01b"),o=a.n(r),n=a("f121"),d={name:"Wallet",data(){return{loading:!0,showCreateDialog:!1,showImportDialog:!1,showTransferDialogFlag:!1,showEditRemarkDialog:!1,showWatchWalletDialog:!1,showExportPrivateKeyDialog:!1,showEditBindAddressDialog:!1,showDeleteWalletDialog:!1,createLoading:!1,importLoading:!1,transferLoading:null,remarkLoading:!1,watchWalletLoading:!1,bindAddressLoading:!1,deleteLoading:!1,walletRefreshing:{},newWallet:{privateKey:"",address:"",bindAddress:"",remark:""},importedWallet:{privateKey:"",address:"",bindAddress:"",remark:""},watchWallet:{address:"",remark:""},currentWallet:null,transferAmount:"",remarkText:"",useBindAddress:!0,customTransferAddress:"",privateKeyVisible:!1,copySuccess:!1,newBindAddress:"",config:{API_CONFIG:n["a"],TIME_CONFIG:n["d"]}}},computed:{...Object(i["e"])(["wallets","isUnlocked"]),totalBalance(){return this.wallets.reduce((t,e)=>t+(e.balance||0),0).toFixed(2)}},watch:{"importedWallet.privateKey":function(t){if(t)try{const e=new o.a({fullHost:n["a"].TRON_API_BASE}),a=e.address.fromPrivateKey(t);this.importedWallet.address=a}catch(e){console.error("处理私钥出错:",e),this.importedWallet.address="无效的私钥"}else this.importedWallet.address=""}},created(){this.isUnlocked?(this.fetchData(),0===this.wallets.length&&this.generateNewWallet().then(()=>{this.showCreateDialog=!0}).catch(t=>{console.error("首次使用生成钱包失败:",t)})):this.$router.push("/login")},methods:{...Object(i["b"])(["updateAllWallets","updateSingleWallet","createWallet","importWallet","importWatchWallet","transfer","updateWalletRemark","updateBindAddress","deleteWallet"]),async fetchData(){this.loading=!0,await this.updateAllWallets(),this.loading=!1},generateNewWallet(){return new Promise((t,e)=>{try{console.log("开始生成钱包..."),console.log("TronWeb类型:",typeof o.a);const a=new o.a({fullHost:n["a"].TRON_API_BASE});console.log("TronWeb 实例化成功"),a.createAccount().then(e=>{console.log("生成账户成功:",e),this.newWallet.privateKey=e.privateKey,this.newWallet.address=e.address.base58,console.log("生成私钥成功:",this.newWallet.privateKey.substring(0,8)+"..."),t(e)}).catch(t=>{console.error("生成账户失败:",t),alert("生成私钥失败，请检查控制台错误信息"),e(t)})}catch(a){console.error("生成钱包失败",a),console.error("错误详情:",a.toString()),alert("生成私钥失败，请检查控制台错误信息"),e(a)}})},async openCreateDialog(){try{this.newWallet.bindAddress="",this.newWallet.remark="",await this.generateNewWallet(),this.showCreateDialog=!0}catch(t){console.error("打开创建钱包对话框失败:",t)}},async handleCreateWallet(){if(!this.newWallet.privateKey||!this.newWallet.address)return alert("私钥和地址未生成，请重试"),void this.hideDialogs();if(this.newWallet.bindAddress){this.createLoading=!0;try{console.log("创建钱包中，使用以下信息:"),console.log("- 地址:",this.newWallet.address.substring(0,8)+"..."),console.log("- 私钥长度:",this.newWallet.privateKey?this.newWallet.privateKey.length:0);const t=await this.createWallet({privateKey:this.newWallet.privateKey,address:this.newWallet.address,bindAddress:this.newWallet.bindAddress,remark:this.newWallet.remark});this.newWallet.bindAddress="",this.newWallet.remark="",alert("钱包创建成功"),this.hideDialogs(),this.$set(this.walletRefreshing,t.address,!0),setTimeout(async()=>{await this.updateSingleWallet({address:t.address}),this.$set(this.walletRefreshing,t.address,!1)},this.config.TIME_CONFIG.REFRESH_DELAY)}catch(t){console.error("创建钱包详细错误:",t),alert("创建钱包失败: "+t.message)}finally{this.createLoading=!1}}else alert("请输入绑定的转出地址")},async handleImportWallet(){if(this.importedWallet.privateKey)if(this.importedWallet.bindAddress){this.importLoading=!0;try{const t=await this.importWallet({privateKey:this.importedWallet.privateKey,bindAddress:this.importedWallet.bindAddress,remark:this.importedWallet.remark});t.success?(this.importedWallet={privateKey:"",address:"",bindAddress:"",remark:""},alert("钱包导入成功"),this.hideDialogs(),this.$set(this.walletRefreshing,t.wallet.address,!0),setTimeout(async()=>{await this.updateSingleWallet({address:t.wallet.address}),this.$set(this.walletRefreshing,t.wallet.address,!1)},this.config.TIME_CONFIG.REFRESH_DELAY)):alert("导入钱包失败: "+t.message)}catch(t){alert("导入钱包出错: "+t.message)}finally{this.importLoading=!1}}else alert("请输入绑定的转出地址");else alert("请输入私钥")},openTransferDialog(t){this.currentWallet=t,this.transferAmount="",this.showTransferDialogFlag=!0},async transferOut(){if(console.log("开始转出操作"),!this.currentWallet)return void console.error("当前钱包不存在");if(!this.transferAmount||parseFloat(this.transferAmount)<=0)return console.log("转出金额无效:",this.transferAmount),void alert("请输入有效的转出金额");if(parseFloat(this.transferAmount)>this.currentWallet.balance)return console.log("转出金额超过余额:",{"转出金额":parseFloat(this.transferAmount),"余额":this.currentWallet.balance}),void alert("转出金额不能大于当前余额");const t=this.useBindAddress?this.currentWallet.bindAddress:this.customTransferAddress;if(t){this.transferLoading=this.currentWallet.address;try{console.log("调用转账action:",{fromAddress:this.currentWallet.address,toAddress:t,amount:parseFloat(this.transferAmount)});const e=await this.transfer({fromAddress:this.currentWallet.address,toAddress:t,amount:parseFloat(this.transferAmount)});if(console.log("转账action返回结果:",e),e.success){alert("转出交易发送成功，交易ID: "+e.txId),this.hideDialogs();const t=this.currentWallet.address;this.$set(this.walletRefreshing,t,!0),setTimeout(async()=>{await this.updateSingleWallet({address:t}),this.$set(this.walletRefreshing,t,!1)},this.config.TIME_CONFIG.REFRESH_DELAY)}else alert("转出失败: "+e.message)}catch(e){console.error("转出操作捕获到错误:",e),alert("转出操作出错: "+e.message)}finally{this.transferLoading=null}}else alert("请输入有效的转出地址")},openEditRemarkDialog(t){this.currentWallet=t,this.remarkText=t.remark||"",this.showEditRemarkDialog=!0},async updateRemark(){if(this.currentWallet){this.remarkLoading=!0;try{const t=await this.updateWalletRemark({address:this.currentWallet.address,remark:this.remarkText});t.success?(alert("备注更新成功"),this.hideDialogs()):alert("更新备注失败: "+t.message)}catch(t){alert("更新备注出错: "+t.message)}finally{this.remarkLoading=!1}}},hideDialogs(){this.currentWallet=null,this.transferAmount="",this.useBindAddress=!0,this.customTransferAddress="",this.remarkText="",this.importedWallet={privateKey:"",address:"",bindAddress:"",remark:""},this.watchWallet={address:"",remark:""},this.privateKeyVisible=!1,this.copySuccess=!1,this.newBindAddress="",this.showCreateDialog=!1,this.showImportDialog=!1,this.showTransferDialogFlag=!1,this.showEditRemarkDialog=!1,this.showWatchWalletDialog=!1,this.showExportPrivateKeyDialog=!1,this.showEditBindAddressDialog=!1,this.showDeleteWalletDialog=!1},formatAddress(t){return t?t.substring(0,8)+"..."+t.substring(t.length-8):""},formatBalance(t){return void 0===t||null===t?"0":parseFloat(t).toFixed(2)},async handleImportWatchWallet(){if(this.watchWallet.address){this.watchWalletLoading=!0;try{const t=await this.importWatchWallet({address:this.watchWallet.address,remark:this.watchWallet.remark});t.success?(this.watchWallet={address:"",remark:""},alert("观察钱包添加成功"),this.hideDialogs(),this.$set(this.walletRefreshing,t.wallet.address,!0),setTimeout(async()=>{await this.updateSingleWallet({address:t.wallet.address}),this.$set(this.walletRefreshing,t.wallet.address,!1)},this.config.TIME_CONFIG.REFRESH_DELAY)):alert("添加观察钱包失败: "+t.message)}catch(t){alert("添加观察钱包出错: "+t.message)}finally{this.watchWalletLoading=!1}}else alert("请输入钱包地址")},openExportPrivateKeyDialog(t){this.currentWallet=t,this.showExportPrivateKeyDialog=!0},showPrivateKey(){this.privateKeyVisible=!0},copyPrivateKey(){const t=this.currentWallet?this.currentWallet.privateKey:"",e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.copySuccess=!0},openEditBindAddressDialog(t){this.currentWallet=t,this.showEditBindAddressDialog=!0},async updateBindAddress(){if(this.currentWallet){this.bindAddressLoading=!0;try{const t=await this.updateBindAddress({address:this.currentWallet.address,bindAddress:this.newBindAddress});t.success?(alert("绑定地址更新成功"),this.hideDialogs()):alert("更新绑定地址失败: "+t.message)}catch(t){alert("更新绑定地址出错: "+t.message)}finally{this.bindAddressLoading=!1}}},openDeleteWalletDialog(t){this.currentWallet=t,this.showDeleteWalletDialog=!0},async confirmDeleteWallet(){if(this.currentWallet){this.deleteLoading=!0;try{const t=await this.deleteWallet({address:this.currentWallet.address});t.success?(alert("钱包删除成功"),this.hideDialogs(),this.$set(this.walletRefreshing,this.currentWallet.address,!0),setTimeout(async()=>{await this.updateSingleWallet({address:this.currentWallet.address}),this.$set(this.walletRefreshing,this.currentWallet.address,!1)},this.config.TIME_CONFIG.REFRESH_DELAY)):alert("删除钱包失败: "+t.message)}catch(t){alert("删除钱包出错: "+t.message)}finally{this.deleteLoading=!1}}}}},c=d,u=(a("eec2"),a("2877")),p=Object(u["a"])(c,s,l,!1,null,"e164401e",null);e["default"]=p.exports},9546:function(t,e,a){},eec2:function(t,e,a){"use strict";a("9546")}}]);